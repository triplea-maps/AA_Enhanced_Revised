language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: yWipwTAgvZVbpwe46Er0nyhspXKUpYpGrlkyUQQmxWfwl+XCUEtqY3sy9l/g5xfon/cV+Y1jeO+bknCsRvyHV7o9zu9egy6VJzxGuwHKho9x9LQHDF+eUkLCdwMhJHG0s/O7tdJj2PRGMzp9qC1EPIcsR0nI0hbfaXQ8GbCuvsDhZjuu+G6szn9zky3PyuG7f8C2zF0bxHR8g8FjcwkrnRmWsKK+WQOWFpHumte5nuLj1DnWjOnHqlR9/kP3ZFLLfS9O5GZIFL1ppG/4m+L6eHrLhenpVBHmMGzni8z9yahfpQ3FsPv5jU7w2fty8MS5S8VBN04ByEa+YbNbqTbWUsCUUz0grc+ReycIDV8zqBTmsR5YTdtCaCpIJbnztRNjDI2M3EvnvJRto2tYhhfV5hnNqG/Wvr58lHM3OmOJe5O/0ysQNs2eA3QHurDEYEOACNjt7H7MbXsESDvPZA5APf5ua4LYJIFftFI25t92VFGOzZ8VlQMLraAZ6RA1AhVlW6xtORizMUv8H4IofkNzEISPft4Evrcu962FAgGVOTZemIxzDrILWOQT0M586Sd8wjLPR018ZAArGU8XgsnDy2vue+JTOqSVICXM+e+eu4lnUFO6d7TYMjqOYgJ4HX88s4tiTCJ51bw1iqHEGfUqqooiRWjTSvxbnCEfteC8/dM=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
